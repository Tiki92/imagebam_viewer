<!DOCTYPE html>
<html lang="en">
<title>Images</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<style>
    body,
    h1,
    h2,
    h3,
    h4,
    h5 {
        font-family: "Raleway", sans-serif
    }

    .w3-third img {
        margin-bottom: -6px;
        opacity: 0.8;
        cursor: pointer;
        /* border: 20px; */
    }

    .w3-third img:hover {
        opacity: 1;
    }

    img.main-image {
        /* max-width: 10% !important; */
        /* float: left; */
        width: 300px;
        height: 300px;
        object-fit: cover;
    }

    #magic_{{ last_img_id }} {
        border: solid limegreen;
    }
</style>

<body>
    <div style="margin-bottom: 55px">
        <form class="form-inline my-2 my-lg-0" method="get" action="">

            <button style="margin-right:10px" class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" size="80" name="search">
        </form>
      </div>

    <!-- Pagination -->
    <div class="w3-center w3-padding-32">
        <div class="w3-bar">
            {% if page_obj.has_previous %}
            <a href="?page=1" class="w3-bar-item w3-button w3-hover-black">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}"
                class="w3-bar-item w3-button w3-hover-black">previous</a>
            {% endif %}

            <a href="#" class="w3-bar-item w3-black w3-button">{{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</a>

            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" class="w3-bar-item w3-button w3-hover-black">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}" class="w3-bar-item w3-button w3-hover-black">last
                &raquo;</a>

            {% endif %}
            <a href="?page={{ last_img_page }}" class="w3-bar-item w3-button w3-hover-black">LAST CHECKED</a>
        </div>
    </div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main">

        <!-- Photo grid -->
        <div class="w3-row">

            {% if page_obj %}
            <!-- <ul> -->
            {% for image in page_obj %}
            <div class="w3-third">
                <img id="magic_{{ image.id }}" style="width:100%" onclick="onClick(this)" class="main-image"
                    alt="{{ image.name }}" src="{{ image.img_tag }}">
                <!-- <a href="{% url 'setlastimg' image.id page_obj.number %}">Set last img</a> -->

                <div style="display: inline-block;">
                    <a href="{% url 'setlastimg' image.id page_obj.number %}">Set last image</a>
                </div>
                <div style="display: inline-block; margin-left: 200px;">
                    <a target="_blank" href="{{ image.link }}">See Original</a>
                </div>
            </div>

            {% endfor %}
            {% else %}
            <p>No polls are available.</p>
            {% endif %}

        </div>

        <!-- Pagination -->
        <div class="w3-center w3-padding-32">
            <div class="w3-bar">
                {% if page_obj.has_previous %}
                <a href="?page=1" class="w3-bar-item w3-button w3-hover-black">&laquo; first</a>
                <a href="?page={{ page_obj.previous_page_number }}"
                    class="w3-bar-item w3-button w3-hover-black">previous</a>
                {% endif %}

                <a href="#" class="w3-bar-item w3-black w3-button">{{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</a>

                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="w3-bar-item w3-button w3-hover-black">next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}" class="w3-bar-item w3-button w3-hover-black">last
                    &raquo;</a>

                {% endif %}
                <a href="?page={{ last_img_page }}" class="w3-bar-item w3-button w3-hover-black">LAST CHECKED</a>
            </div>
        </div>

        <!-- Modal for full size images on click-->
        <div id="modal01" class="w3-modal w3-black" style="padding-top:0" onclick="this.style.display='none'">
            <span class="w3-button w3-black w3-xlarge w3-display-topright">Ã—</span>
            <div class="w3-modal-content w3-animate-zoom w3-center w3-transparent w3-padding-64">
                <img id="img01" class="w3-image">
                <p id="caption"></p>
            </div>
        </div>

        <!-- End page content -->
    </div>

    <script>
        // Modal Image Gallery
        function onClick(element) {
            document.getElementById("img01").src = element.src;
            document.getElementById("modal01").style.display = "block";
            var captionText = document.getElementById("caption");
            captionText.innerHTML = element.alt;
        }

    </script>
</body>

</html>